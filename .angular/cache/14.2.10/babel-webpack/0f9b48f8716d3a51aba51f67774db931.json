{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/WM/Documents/GitHub/desafio-angular-codigo-do-futuro/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { PedidoProdutoServico } from \"./pedidoProdutoServico\";\nimport { PedidoServico } from \"./pedidoServico\";\nexport class Carrinho {\n  static buscaTamanho() {\n    return Carrinho.carrinho.length;\n  }\n\n  static setCliente_Id(id) {\n    this.pedido.cliente_id = id;\n  }\n\n  static listar() {\n    return Carrinho.carrinho;\n  }\n\n  static setPedido(cliente_id) {\n    Carrinho.pedido.cliente_id = cliente_id;\n  }\n\n  static adicionaPedidoProduto(produto) {\n    let pedidoProduto = {};\n    Carrinho.id++;\n    pedidoProduto.quantidade = 1;\n    pedidoProduto.id = Carrinho.id;\n    pedidoProduto.produto_id = produto.id;\n    pedidoProduto.valor = produto.valor;\n    Carrinho.carrinho.push(pedidoProduto);\n  }\n\n  static excluirProduto(id) {\n    console.log(Carrinho.carrinho);\n    let item = Carrinho.carrinho.splice(id, 1);\n  }\n\n  static getValor_Total() {\n    let total = 0;\n    Carrinho.carrinho.forEach(item => {\n      total += Number(item.quantidade) * Number(item.valor);\n    });\n    return Carrinho.pedido.valor_total = new Number(total);\n  }\n\n  static salvar(http) {\n    return _asyncToGenerator(function* () {\n      let id = new Number(Number((yield new PedidoServico(http).getLast())?.id) + 1);\n      !id ? 0 : Carrinho.pedido.id = id;\n      Carrinho.carrinho.forEach( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (item) {\n          item.id = new Number(Carrinho.pedido?.id.toString() + item.id);\n          console.log(\"teste \" + item.id);\n          item.pedido_id = Carrinho.pedido.id;\n          return yield new PedidoProdutoServico(http).criar(item);\n        });\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n      yield new PedidoServico(http).criar(Carrinho.pedido);\n    })();\n  }\n\n  static reset() {\n    while (this.carrinho.length > 0) {\n      this.carrinho.pop();\n    }\n  }\n\n}\nCarrinho.carrinho = [{\n  \"id\": 201,\n  \"pedido_id\": 2,\n  \"produto_id\": 1,\n  \"valor\": 10,\n  \"quantidade\": 2\n}, {\n  \"id\": 202,\n  \"pedido_id\": 2,\n  \"produto_id\": 2,\n  \"valor\": 10,\n  \"quantidade\": 2\n}];\nCarrinho.id = 0;\nCarrinho.pedido = {\n  \"id\": 2,\n  \"cliente_id\": 3,\n  \"valor_total\": 40,\n  \"data\": new Date(new Date().getTime())\n};","map":{"version":3,"mappings":"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","names":["PedidoProdutoServico","PedidoServico","Carrinho","buscaTamanho","carrinho","length","setCliente_Id","id","pedido","cliente_id","listar","setPedido","adicionaPedidoProduto","produto","pedidoProduto","quantidade","produto_id","valor","push","excluirProduto","console","log","item","splice","getValor_Total","total","forEach","Number","valor_total","salvar","http","getLast","toString","pedido_id","criar","reset","pop","Date","getTime"],"sourceRoot":"","sources":["C:\\Users\\WM\\Documents\\GitHub\\desafio-angular-codigo-do-futuro\\src\\app\\servicos\\carrinho.ts"],"sourcesContent":["import { PedidoProdutoServico } from \"./pedidoProdutoServico\";\r\nimport { PedidoServico } from \"./pedidoServico\";\r\nimport { PedidoProduto } from \"../models/pedidoProduto\";\r\nimport { HttpClient } from \"@angular/common/http\";\r\nimport { Pedido } from \"../models/pedido\";\r\nimport { Produto } from \"../models/produto\";\r\n\r\nexport class Carrinho{\r\n\r\n    private static carrinho: (PedidoProduto)[]=[{\"id\":201,\"pedido_id\":2,\"produto_id\":1,\"valor\":10,\"quantidade\":2},\r\n    {\"id\":202,\"pedido_id\":2,\"produto_id\":2,\"valor\":10,\"quantidade\":2}];\r\n    private static id:number=0;\r\n    private static pedido: Pedido={\"id\":2,\"cliente_id\":3,\"valor_total\":40,\"data\":new Date((new Date()).getTime())};\r\n    \r\n    public static buscaTamanho():number{\r\n        return Carrinho.carrinho.length;\r\n    }\r\n\r\n    public static setCliente_Id(id:Number):void{\r\n        this.pedido.cliente_id=id;\r\n    }\r\n\r\n    public static listar():(PedidoProduto)[]{\r\n        return Carrinho.carrinho;\r\n    }\r\n\r\n    public static setPedido(cliente_id:Number){\r\n        Carrinho.pedido.cliente_id=cliente_id;\r\n    }\r\n\r\n    public static adicionaPedidoProduto(produto:Produto):void{\r\n        let pedidoProduto={} as PedidoProduto;\r\n        Carrinho.id++;\r\n        pedidoProduto.quantidade=1\r\n        pedidoProduto.id=Carrinho.id;\r\n        pedidoProduto.produto_id=produto.id;\r\n        pedidoProduto.valor=produto.valor;\r\n        Carrinho.carrinho.push(pedidoProduto);\r\n     }\r\n\r\n\r\n    public static excluirProduto(id:number):void{\r\n        console.log(Carrinho.carrinho);\r\n        let item=Carrinho.carrinho.splice(id,1);\r\n        }\r\n\r\n    public static getValor_Total():Number{\r\n        let total=0;\r\n        Carrinho.carrinho.forEach(item=>{\r\n            total+=Number(item.quantidade)*Number(item.valor);\r\n        })\r\n        return Carrinho.pedido.valor_total=new Number(total);\r\n    }\r\n\r\n    public static async salvar(http:HttpClient):Promise<void>{\r\n        let id =new Number(Number((await new PedidoServico(http).getLast())?.id)+1);\r\n        !id? 0:Carrinho.pedido.id=id;\r\n\r\n        Carrinho.carrinho.forEach(async item=>{\r\n            item.id=new Number(Carrinho.pedido?.id.toString()+item.id)\r\n            console.log(\"teste \"+item.id)\r\n            item.pedido_id=Carrinho.pedido.id;\r\n            return await new PedidoProdutoServico(http).criar(item)\r\n        })\r\n        await new PedidoServico(http).criar(Carrinho.pedido);\r\n    }\r\n\r\n    public static reset(){\r\n        while(this.carrinho.length>0){\r\n            this.carrinho.pop();\r\n        }\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}