{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/WM/Documents/GitHub/desafio-angular-codigo-do-futuro/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ProdutoServico } from 'src/app/servicos/produtoServico';\nimport { CategoriaServico } from 'src/app/servicos/categoriaServico';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\n\nfunction FormProdutosComponent_form_3_option_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const categoria_r2 = ctx.$implicit;\n    const i_r3 = ctx.index;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵpropertyInterpolate(\"id\", categoria_r2.id);\n    i0.ɵɵproperty(\"selected\", ctx_r1.selecionado[i_r3]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i_r3 + 1 + \"- \" + categoria_r2.nome, \"\");\n  }\n}\n\nfunction FormProdutosComponent_form_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"form\", 4)(1, \"div\", 5)(2, \"div\", 6)(3, \"label\", 7);\n    i0.ɵɵtext(4, \"Nome\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"input\", 8);\n    i0.ɵɵlistener(\"ngModelChange\", function FormProdutosComponent_form_3_Template_input_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.produto.nome = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 6)(7, \"label\", 7);\n    i0.ɵɵtext(8, \"Categoria\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"select\", 9);\n    i0.ɵɵlistener(\"ngModelChange\", function FormProdutosComponent_form_3_Template_select_ngModelChange_9_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.categoriaSelecionado = $event);\n    });\n    i0.ɵɵelement(10, \"option\");\n    i0.ɵɵtemplate(11, FormProdutosComponent_form_3_option_11_Template, 2, 3, \"option\", 10);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(12, \"div\", 5)(13, \"div\", 6)(14, \"label\", 7);\n    i0.ɵɵtext(15, \"Descri\\u00E7\\u00E3o\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"input\", 11);\n    i0.ɵɵlistener(\"ngModelChange\", function FormProdutosComponent_form_3_Template_input_ngModelChange_16_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.produto.descricao = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"div\", 6)(18, \"label\", 7);\n    i0.ɵɵtext(19, \"Valor\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"input\", 12);\n    i0.ɵɵlistener(\"ngModelChange\", function FormProdutosComponent_form_3_Template_input_ngModelChange_20_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.produto.valor = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(21, \"div\", 5)(22, \"div\", 6)(23, \"label\", 7);\n    i0.ɵɵtext(24, \"Quantidade\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"input\", 13);\n    i0.ɵɵlistener(\"ngModelChange\", function FormProdutosComponent_form_3_Template_input_ngModelChange_25_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.produto.qtd_estoque = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(26, \"div\", 6)(27, \"label\", 7);\n    i0.ɵɵtext(28, \"Custo\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"input\", 14);\n    i0.ɵɵlistener(\"ngModelChange\", function FormProdutosComponent_form_3_Template_input_ngModelChange_29_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.produto.custo = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(30, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function FormProdutosComponent_form_3_Template_button_click_30_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.registrar());\n    });\n    i0.ɵɵtext(31);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.produto.nome);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.categoriaSelecionado);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.categorias);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.produto.descricao);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.produto.valor);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.produto.qtd_estoque);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.produto.custo);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.tituloDoBotao);\n  }\n}\n\nexport class FormProdutosComponent {\n  constructor(router, http, routerParams) {\n    this.router = router;\n    this.http = http;\n    this.routerParams = routerParams;\n    this.categorias = [];\n    this.selecionado = [];\n    this.categoria_id = -1;\n    this.categoriaSelecionado = \"\";\n    this.tituloDoBotao = \"Cadastrar\";\n    this.produtoServico = {};\n    this.produto = {};\n  }\n\n  ngOnInit() {\n    this.produtoServico = new ProdutoServico(this.http);\n    let id = this.routerParams.snapshot.params['id'];\n\n    if (id) {\n      this.editaProduto(id);\n    }\n\n    this.listaCategorias();\n  }\n\n  listaCategorias() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      let categorias = yield new CategoriaServico(_this.http).lista();\n      categorias?.forEach(categoria => {\n        if (_this.produto?.categoria_id && categoria.id.toString() === _this.produto?.categoria_id.toString()) {\n          _this.selecionado.push(true);\n        } else {\n          _this.selecionado.push(false);\n        }\n\n        _this.categorias.push(categoria);\n      });\n    })();\n  }\n\n  editaProduto(id) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      _this2.tituloDoBotao = \"Alterar\";\n      _this2.produto = yield _this2.produtoServico.buscaPorId(id);\n      if (_this2.produto?.id) _this2.categoria_id = _this2.produto.id;\n      let categoria_id = _this2.produto?.categoria_id;\n      if (categoria_id) _this2.categoria_id = categoria_id;\n    })();\n  }\n\n  registrar() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this3.categoriaSelecionado == \"\" && _this3.categoria_id == -1) {\n        return;\n      }\n\n      if (_this3.produto && _this3.produto.id > 0) {\n        let produto = _this3.verificaUndefined();\n\n        if (produto) {\n          yield _this3.produtoServico.update(produto);\n\n          _this3.router.navigateByUrl(\"/produtos\");\n        }\n      } else {\n        if (!_this3.produto) {} else {\n          let produto = _this3.verificaUndefined();\n\n          if (produto) {\n            yield _this3.produtoServico.criar(produto);\n\n            _this3.router.navigateByUrl(\"/produtos\");\n          }\n        }\n      }\n    })();\n  }\n\n  verificaUndefined() {\n    let nome = \"\";\n    let categoria_id = this.categoria_id;\n    let id = 0;\n\n    if (this.categoriaSelecionado.split(\"-\")[0] != \"\") {\n      categoria_id = new Number(this.categoriaSelecionado.split(\"-\")[0]);\n    }\n\n    console.log(categoria_id);\n    let descricao = \"\";\n    let valor = 0;\n    let qtd_estoque = 0;\n    let custo = 0;\n    if (this.produto?.id) id = this.produto.id;\n    if (this.produto?.nome && !(this.produto.nome === \"\")) nome = this.produto.nome;else {\n      alert(\"Por favor digite um nome válido\");\n      return undefined;\n    }\n    if (this.produto?.descricao && !(this.produto.descricao === \"\")) descricao = this.produto.descricao;else {\n      alert(\"Por favor digite uma descrição válido\");\n      return undefined;\n    }\n    if (this.produto?.valor && !(this.produto.valor === 0)) valor = this.produto.valor;else {\n      alert(\"Por favor digite um valor válido\");\n      return undefined;\n    }\n    if (this.produto?.qtd_estoque && !(this.produto.qtd_estoque === 0)) qtd_estoque = this.produto.qtd_estoque;else {\n      alert(\"Por favor digite uma quantidade válido\");\n      return undefined;\n    }\n    if (this.produto?.custo && !(this.produto.custo === 0)) custo = this.produto.custo;else {\n      alert(\"Por favor digite um custo válido\");\n      return undefined;\n    }\n    let produto = {\n      id: id,\n      categoria_id: categoria_id,\n      nome: nome,\n      descricao: descricao,\n      valor: valor,\n      qtd_estoque: qtd_estoque,\n      custo: custo\n    };\n    return produto;\n  }\n\n  number(n, i) {\n    return Number(n);\n  }\n\n}\n\nFormProdutosComponent.ɵfac = function FormProdutosComponent_Factory(t) {\n  return new (t || FormProdutosComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.HttpClient), i0.ɵɵdirectiveInject(i1.ActivatedRoute));\n};\n\nFormProdutosComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: FormProdutosComponent,\n  selectors: [[\"app-form-produtos\"]],\n  decls: 4,\n  vars: 1,\n  consts: [[\"id\", \"contact\", 1, \"page-section\", 2, \"margin-top\", \"10px\"], [1, \"container\"], [1, \"col-lg-8\", \"col-xl-7\", 2, \"width\", \"100%\", \"max-width\", \"960px\"], [\"class\", \"form\", \"autocomplete\", \"off\", 4, \"ngIf\"], [\"autocomplete\", \"off\", 1, \"form\"], [1, \"lateral\"], [1, \"form-group\"], [\"for\", \"exampleInputEmail1\", 2, \"padding\", \"10px\"], [\"type\", \"text\", \"id\", \"nome-produto\", \"name\", \"nome-produto\", \"placeholder\", \"Insira o nome do produto\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"teste\", \"id\", \"required\", \"data-placeholder\", \"CPF - Nome do cliente\", 1, \"form-control\", \"form-control-chosen-required\", 2, \"width\", \"210px\", 3, \"ngModel\", \"ngModelChange\"], [3, \"id\", \"selected\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"text\", \"id\", \"descricao-produto\", \"name\", \"descricao-produto\", \"placeholder\", \"Insira a descri\\u00E7\\u00E3o\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"id\", \"valor-produto\", \"name\", \"valor-produto\", \"placeholder\", \"00.00\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"id\", \"quantidade-produ\", \"name\", \"quantidade-produ\", \"placeholder\", \"Insira a quantidade\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"id\", \"quantidade-produto\", \"name\", \"quantidade-produto\", \"placeholder\", \"Insira a quantidade\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"id\", \"submitButton\", \"type\", \"button\", 1, \"btn\", \"btn-primary\", \"btn-xl\", \"m-3\", 3, \"click\"], [3, \"id\", \"selected\"]],\n  template: function FormProdutosComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1)(2, \"div\", 2);\n      i0.ɵɵtemplate(3, FormProdutosComponent_form_3_Template, 32, 8, \"form\", 3);\n      i0.ɵɵelementEnd()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.produto);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i4.ɵNgNoValidate, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.NgModel, i4.NgForm],\n  styles: [\".page-section[_ngcontent-%COMP%]{\\r\\n    display: grid;\\r\\n    justify-content: center;\\r\\n    margin-top: 5px;\\r\\n    padding-bottom: 50px;\\r\\n    padding-top: 50px;\\r\\n    margin-bottom: 5px;\\r\\n    margin-right: 6px;\\r\\n    margin-left: 6px;\\r\\n    box-sizing: border-box;\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\n.form[_ngcontent-%COMP%]{\\r\\n    \\r\\n    flex-wrap: wrap;\\r\\n    justify-content: space-between;\\r\\n\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\n.form-group[_ngcontent-%COMP%]{\\r\\n    margin: 10px;\\r\\n    padding-top: 14px;\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\n.lateral[_ngcontent-%COMP%]{\\r\\n    display: flex;\\r\\n    align-content: center;\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\n.container[_ngcontent-%COMP%]{\\r\\n    background: #f8f8f8;\\r\\n    border-radius: 10px;\\r\\n    text-align-last: left;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvcm0tcHJvZHV0b3MuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGFBQWE7SUFDYix1QkFBdUI7SUFDdkIsZUFBZTtJQUNmLG9CQUFvQjtJQUNwQixpQkFBaUI7SUFDakIsa0JBQWtCO0lBQ2xCLGlCQUFpQjtJQUNqQixnQkFBZ0I7SUFDaEIsc0JBQXNCO0FBQzFCOzs7O0FBSUE7O0lBRUksZUFBZTtJQUNmLDhCQUE4Qjs7QUFFbEM7Ozs7QUFFQTtJQUNJLFlBQVk7SUFDWixpQkFBaUI7QUFDckI7Ozs7QUFFQTtJQUNJLGFBQWE7SUFDYixxQkFBcUI7QUFDekI7Ozs7QUFFQTtJQUNJLG1CQUFtQjtJQUNuQixtQkFBbUI7SUFDbkIscUJBQXFCO0FBQ3pCIiwiZmlsZSI6ImZvcm0tcHJvZHV0b3MuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5wYWdlLXNlY3Rpb257XHJcbiAgICBkaXNwbGF5OiBncmlkO1xyXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICBtYXJnaW4tdG9wOiA1cHg7XHJcbiAgICBwYWRkaW5nLWJvdHRvbTogNTBweDtcclxuICAgIHBhZGRpbmctdG9wOiA1MHB4O1xyXG4gICAgbWFyZ2luLWJvdHRvbTogNXB4O1xyXG4gICAgbWFyZ2luLXJpZ2h0OiA2cHg7XHJcbiAgICBtYXJnaW4tbGVmdDogNnB4O1xyXG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxufVxyXG5cclxuXHJcblxyXG4uZm9ybXtcclxuICAgIFxyXG4gICAgZmxleC13cmFwOiB3cmFwO1xyXG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG5cclxufVxyXG5cclxuLmZvcm0tZ3JvdXB7XHJcbiAgICBtYXJnaW46IDEwcHg7XHJcbiAgICBwYWRkaW5nLXRvcDogMTRweDtcclxufVxyXG5cclxuLmxhdGVyYWx7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgYWxpZ24tY29udGVudDogY2VudGVyO1xyXG59XHJcblxyXG4uY29udGFpbmVye1xyXG4gICAgYmFja2dyb3VuZDogI2Y4ZjhmODtcclxuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XHJcbiAgICB0ZXh0LWFsaWduLWxhc3Q6IGxlZnQ7XHJcbn0iXX0= */\"]\n});","map":{"version":3,"mappings":"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","names":["ProdutoServico","CategoriaServico","i0","FormProdutosComponent","constructor","router","http","routerParams","ngOnInit","produtoServico","id","snapshot","params","editaProduto","listaCategorias","categorias","lista","forEach","categoria","produto","categoria_id","toString","selecionado","push","tituloDoBotao","buscaPorId","registrar","categoriaSelecionado","verificaUndefined","update","navigateByUrl","criar","nome","split","Number","console","log","descricao","valor","qtd_estoque","custo","alert","undefined","number","n","i","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\WM\\Documents\\GitHub\\desafio-angular-codigo-do-futuro\\src\\app\\pages\\form-produtos\\form-produtos.component.ts","C:\\Users\\WM\\Documents\\GitHub\\desafio-angular-codigo-do-futuro\\src\\app\\pages\\form-produtos\\form-produtos.component.html"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Produto } from 'src/app/models/produto';\r\nimport { ProdutoServico } from 'src/app/servicos/produtoServico';\r\nimport { CategoriaServico } from 'src/app/servicos/categoriaServico';\r\nimport { Categoria } from 'src/app/models/categoria';\r\n\r\n\r\n@Component({\r\n  selector: 'app-form-produtos',\r\n  templateUrl: './form-produtos.component.html',\r\n  styleUrls: ['./form-produtos.component.css']\r\n})\r\nexport class FormProdutosComponent implements OnInit {\r\n\r\n  public categorias:Categoria[]=[];\r\n  public selecionado:boolean[]=[]\r\n  public categoria_id: Number=-1;\r\n  public categoriaSelecionado:String =\"\";\r\n\r\n  constructor(\r\n    private router:Router,\r\n    private http:HttpClient,\r\n    private routerParams:ActivatedRoute \r\n  ) { }\r\n\r\n  public tituloDoBotao:String = \"Cadastrar\";\r\n  private produtoServico:ProdutoServico = {} as ProdutoServico\r\n  public produto:Produto | undefined = {} as Produto;\r\n  ngOnInit(): void {\r\n    this.produtoServico = new ProdutoServico(this.http);\r\n    let id:Number = this.routerParams.snapshot.params['id'];\r\n    if(id){\r\n      this.editaProduto(id);\r\n    }\r\n    this.listaCategorias();\r\n  }\r\n  \r\n  private async listaCategorias(){\r\n    let categorias=await new CategoriaServico(this.http).lista();\r\n    categorias?.forEach(categoria => {\r\n      if(this.produto?.categoria_id&&categoria.id.toString()===this.produto?.categoria_id.toString()){\r\n        this.selecionado.push(true)\r\n        \r\n      }else{\r\n        this.selecionado.push(false)\r\n      }\r\n      this.categorias.push(categoria);\r\n    });\r\n  }\r\n  private async editaProduto(id:Number){\r\n    this.tituloDoBotao = \"Alterar\";\r\n    this.produto = await this.produtoServico.buscaPorId(id);\r\n    if(this.produto?.id)this.categoria_id=this.produto.id;\r\n    let categoria_id=this.produto?.categoria_id;\r\n    if(categoria_id)this.categoria_id=categoria_id\r\n  }\r\n\r\n  async registrar(){\r\n    if(this.categoriaSelecionado==\"\"&&this.categoria_id==-1){\r\n      return;\r\n    }\r\n    if(this.produto && this.produto.id > 0){\r\n      let produto = this.verificaUndefined()\r\n        if(produto){\r\n          await this.produtoServico.update(produto);\r\n          this.router.navigateByUrl(\"/produtos\");\r\n        }\r\n    }\r\n    else{\r\n      if(!this.produto){}\r\n      else{\r\n        let produto = this.verificaUndefined()\r\n        if(produto){\r\n          await this.produtoServico.criar(produto);\r\n          this.router.navigateByUrl(\"/produtos\");\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  verificaUndefined(){\r\n    let nome:String = \"\";\r\n    let categoria_id=this.categoria_id\r\n    let id:Number=0\r\n    if(this.categoriaSelecionado.split(\"-\")[0]!=\"\"){\r\n      categoria_id=new Number(this.categoriaSelecionado.split(\"-\")[0])\r\n    }\r\n    console.log(categoria_id)\r\n    let descricao:String = \"\";\r\n    let valor:Number = 0;\r\n    let qtd_estoque:Number = 0;\r\n    let custo:Number = 0;\r\n\r\n    if(this.produto?.id) id = this.produto.id;\r\n    \r\n    if(this.produto?.nome && !(this.produto.nome===\"\")) nome = this.produto.nome; \r\n    else{       \r\n      alert(\"Por favor digite um nome válido\");      \r\n      return undefined;     \r\n    }\r\n    if(this.produto?.descricao && !(this.produto.descricao===\"\")) descricao = this.produto.descricao;\r\n    else{       \r\n      alert(\"Por favor digite uma descrição válido\");      \r\n      return undefined;     \r\n    }\r\n    if(this.produto?.valor && !(this.produto.valor===0)) valor = this.produto.valor;\r\n    else{       \r\n      alert(\"Por favor digite um valor válido\");      \r\n      return undefined;     \r\n    }\r\n    if(this.produto?.qtd_estoque && !(this.produto.qtd_estoque === 0)) qtd_estoque = this.produto.qtd_estoque;\r\n    else{       \r\n      alert(\"Por favor digite uma quantidade válido\");      \r\n      return undefined;     \r\n    }\r\n    if(this.produto?.custo && !(this.produto.custo===0)) custo = this.produto.custo;\r\n    else{       \r\n      alert(\"Por favor digite um custo válido\");      \r\n      return undefined;     \r\n    }\r\n\r\n    let produto = {\r\n      id: id,\r\n      categoria_id:categoria_id,\r\n      nome: nome,\r\n      descricao: descricao,\r\n      valor: valor,\r\n      qtd_estoque: qtd_estoque,\r\n      custo:custo\r\n    }\r\n\r\n    return produto\r\n  }\r\n\r\n  number(n:String, i:number):number{\r\n    \r\n    return Number(n);\r\n  }\r\n}\r\n","<section class=\"page-section\" id=\"contact\" style=\"margin-top: 10px;\">\r\n    <div class=\"container\">\r\n        <div class=\"col-lg-8 col-xl-7\" style=\"width: 100%; max-width: 960px\">\r\n            <form class=\"form\" *ngIf=\"produto\" autocomplete=\"off\">\r\n                <div class=\"lateral\">\r\n                <div class=\"form-group\">\r\n                    <label for=\"exampleInputEmail1\" style=\"padding: 10px;\">Nome</label>\r\n                    <input type=\"text\" class=\"form-control\" id=\"nome-produto\" name=\"nome-produto\" [(ngModel)] = \"produto.nome\" placeholder=\"Insira o nome do produto\">\r\n                </div>\r\n                <div class=\"form-group\">\r\n                    <label for=\"exampleInputEmail1\" style=\"padding: 10px;\">Categoria</label>\r\n                    <select style=\"width: 210px;\" name=\"teste\" id=\"required\" class=\"form-control form-control-chosen-required\" [(ngModel)] = \"categoriaSelecionado\" data-placeholder=\"CPF - Nome do cliente\" >\r\n                        <option></option>\r\n                        <option *ngFor=\"let categoria of categorias; index as i\" id=\"{{categoria.id}}\" [selected]=\"selecionado[i]\">\r\n                            {{(i+1)+\"- \"+categoria.nome}}</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n                <div class=\"lateral\">\r\n                <div class=\"form-group\">\r\n                    <label for=\"exampleInputEmail1\" style=\"padding: 10px;\">Descrição</label>\r\n                    <input type=\"text\" class=\"form-control\" id=\"descricao-produto\" name=\"descricao-produto\" [(ngModel)] = \"produto.descricao\" placeholder=\"Insira a descrição\">\r\n                </div>\r\n                <div class=\"form-group\">\r\n                    <label for=\"exampleInputEmail1\" style=\"padding: 10px;\">Valor</label>\r\n                    <input type=\"text\" class=\"form-control\" id=\"valor-produto\" name=\"valor-produto\" [(ngModel)] = \"produto.valor\" placeholder=\"00.00\">\r\n                </div>\r\n            </div>\r\n            <div class=\"lateral\">\r\n                <div class=\"form-group\">\r\n                    <label for=\"exampleInputEmail1\" style=\"padding: 10px;\">Quantidade</label>\r\n                    <input type=\"text\" class=\"form-control\" id=\"quantidade-produ\" name=\"quantidade-produ\" [(ngModel)] = \"produto.qtd_estoque\" placeholder=\"Insira a quantidade\">\r\n                </div>\r\n                <div class=\"form-group\">\r\n                    <label for=\"exampleInputEmail1\" style=\"padding: 10px;\">Custo</label>\r\n                    <input type=\"text\" class=\"form-control\" id=\"quantidade-produto\" name=\"quantidade-produto\" [(ngModel)] = \"produto.custo\" placeholder=\"Insira a quantidade\">\r\n                </div>\r\n            </div>\r\n                <button class=\"btn btn-primary btn-xl m-3\" id=\"submitButton\" (click)=\"registrar()\" type=\"button\">{{tituloDoBotao}}</button>\r\n            </form>\r\n        </div>\r\n    </div>\r\n</section>"]},"metadata":{},"sourceType":"module"}