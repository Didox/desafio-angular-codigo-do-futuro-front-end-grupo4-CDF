{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/WM/Documents/GitHub/desafio-angular-codigo-do-futuro/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ClienteServico } from 'src/app/servicos/clienteServico';\nimport { PedidoServico } from 'src/app/servicos/pedidoServico';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"@angular/common\";\n\nfunction ListaPedidosComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵtext(1, \" N\\u00E3o existem pedidos cadastrados \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ListaPedidosComponent_table_13_tr_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"th\", 13);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"date\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const pedido_r3 = ctx.$implicit;\n    const i_r4 = ctx.index;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(pedido_r3.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.nomeCliente.at(i_r4));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(7, 4, ctx_r2.number(pedido_r3.valor_total)));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(10, 6, pedido_r3.data, \"dd/MM/yyyy HH:mm\"));\n  }\n}\n\nfunction ListaPedidosComponent_table_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 10)(1, \"thead\")(2, \"tr\")(3, \"th\", 11);\n    i0.ɵɵtext(4, \"ID do pedido\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\", 11);\n    i0.ɵɵtext(6, \"Nome do cliente\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\", 11);\n    i0.ɵɵtext(8, \"Valor total\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\", 11);\n    i0.ɵɵtext(10, \"Data\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(11, \"tbody\");\n    i0.ɵɵtemplate(12, ListaPedidosComponent_table_13_tr_12_Template, 11, 9, \"tr\", 12);\n    i0.ɵɵelementStart(13, \"tr\")(14, \"th\", 13);\n    i0.ɵɵtext(15, \"Soma total\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(16, \"td\");\n    i0.ɵɵelementStart(17, \"td\");\n    i0.ɵɵtext(18);\n    i0.ɵɵpipe(19, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(20, \"td\")(21, \"td\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(22, \"label\", 14);\n    i0.ɵɵtext(23, \"Mostrar tudo\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.pedidos.slice(0, 5));\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(19, 2, ctx_r1.somaTotal()));\n  }\n}\n\nexport class ListaPedidosComponent {\n  constructor(router, http) {\n    this.router = router;\n    this.http = http;\n    this.pedidosServico = {};\n    this.clienteServico = {};\n    this.pedidos = [];\n    this.nomeCliente = [];\n  }\n\n  ngOnInit() {\n    this.pedidosServico = new PedidoServico(this.http);\n    this.clienteServico = new ClienteServico(this.http);\n    this.listaDePedidos();\n  }\n\n  listaDePedidos() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.pedidos = yield _this.pedidosServico.lista();\n      _this.pedidos?.forEach( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (item) {\n          let nome = yield _this.clienteServico.buscaPorId(item.cliente_id);\n          console.log(nome);\n\n          if (!nome) {} else {\n            _this.nomeCliente.push(nome.nome);\n          }\n        });\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n      _this.pedidos = _this.pedidos?.reverse();\n    })();\n  }\n\n  number(a) {\n    return Number(a);\n  }\n\n  somaTotal() {\n    let valorTotal = 0;\n    this.pedidos?.slice(0, 5).forEach(index => {\n      valorTotal += Number(index.valor_total);\n    });\n    return Number(valorTotal);\n  }\n\n}\n\nListaPedidosComponent.ɵfac = function ListaPedidosComponent_Factory(t) {\n  return new (t || ListaPedidosComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.HttpClient));\n};\n\nListaPedidosComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ListaPedidosComponent,\n  selectors: [[\"app-lista-pedidos\"]],\n  decls: 14,\n  vars: 2,\n  consts: [[\"id\", \"contact\", 1, \"page-section\", 2, \"margin-top\", \"100px\"], [1, \"container\"], [\"id\", \"contact\", 1, \"page-section\", 2, \"margin-top\", \"15px\", \"margin-bottom\", \"2px\"], [1, \"titulo\"], [1, \"container2\"], [1, \"row\"], [1, \"col-lg-8\", \"col-xl-7\"], [\"class\", \"alert alert-primary\", \"role\", \"alert\", 4, \"ngIf\"], [\"class\", \"table\", 4, \"ngIf\"], [\"role\", \"alert\", 1, \"alert\", \"alert-primary\"], [1, \"table\"], [\"scope\", \"col\"], [4, \"ngFor\", \"ngForOf\"], [\"scope\", \"row\"], [\"routerLink\", \"/lista-completa\", 1, \"naDireita\"]],\n  template: function ListaPedidosComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtext(0, \"<<<<<<< HEAD\\n\");\n      i0.ɵɵelementStart(1, \"section\", 0)(2, \"div\", 1);\n      i0.ɵɵelement(3, \"hr\");\n      i0.ɵɵtext(4, \"\\n=======\\n\");\n      i0.ɵɵelementStart(5, \"section\", 2)(6, \"h2\", 3);\n      i0.ɵɵtext(7, \"RESUMO PEDIDOS\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"div\", 4);\n      i0.ɵɵtext(9, \" >>>>>>> estetica \");\n      i0.ɵɵelementStart(10, \"div\", 5)(11, \"div\", 6);\n      i0.ɵɵtemplate(12, ListaPedidosComponent_div_12_Template, 2, 0, \"div\", 7);\n      i0.ɵɵtemplate(13, ListaPedidosComponent_table_13_Template, 24, 4, \"table\", 8);\n      i0.ɵɵelementEnd()()()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(12);\n      i0.ɵɵproperty(\"ngIf\", ctx.pedidos && ctx.pedidos.length == 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.pedidos && ctx.pedidos.length > 0);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i1.RouterLink, i3.CurrencyPipe, i3.DatePipe],\n  styles: [\".modelo[_ngcontent-%COMP%]{\\r\\n    display: inline-block;\\r\\n    margin-right: 10px;\\r\\n}\\r\\n.naDireita[_ngcontent-%COMP%]{\\r\\n    text-decoration: underline;\\r\\n    cursor: pointer;\\r\\n    padding-top: 15px;\\r\\n    padding-bottom: 10px;\\r\\n    align-content: center;\\r\\n}\\r\\n.naDireita[_ngcontent-%COMP%]:hover{\\r\\n    color: rgb(23, 35, 209);\\r\\n    transition: 0.5s;\\r\\n}\\r\\n.container2[_ngcontent-%COMP%]{\\r\\n    padding-top: 40px;\\r\\n    margin-left: 20px;\\r\\n    margin-right: 20px;\\r\\n    margin-bottom: 15px;\\r\\n    font-size: 12px;\\r\\n}\\r\\n.row[_ngcontent-%COMP%]{\\r\\n    justify-content: center;\\r\\n}\\r\\n.table[_ngcontent-%COMP%]{\\r\\n    text-align: center;\\r\\n}\\r\\n.titulo[_ngcontent-%COMP%]{\\r\\n    flex-wrap: wrap;\\r\\n    justify-content: center;\\r\\n    margin-top: 8px;\\r\\n    display: flex;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpc3RhLXBlZGlkb3MuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLHFCQUFxQjtJQUNyQixrQkFBa0I7QUFDdEI7QUFDQTtJQUNJLDBCQUEwQjtJQUMxQixlQUFlO0lBQ2YsaUJBQWlCO0lBQ2pCLG9CQUFvQjtJQUNwQixxQkFBcUI7QUFDekI7QUFDQTtJQUNJLHVCQUF1QjtJQUN2QixnQkFBZ0I7QUFDcEI7QUFFQTtJQUNJLGlCQUFpQjtJQUNqQixpQkFBaUI7SUFDakIsa0JBQWtCO0lBQ2xCLG1CQUFtQjtJQUNuQixlQUFlO0FBQ25CO0FBRUE7SUFDSSx1QkFBdUI7QUFDM0I7QUFFQTtJQUNJLGtCQUFrQjtBQUN0QjtBQUVBO0lBQ0ksZUFBZTtJQUNmLHVCQUF1QjtJQUN2QixlQUFlO0lBQ2YsYUFBYTtBQUNqQiIsImZpbGUiOiJsaXN0YS1wZWRpZG9zLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubW9kZWxve1xyXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gICAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xyXG59XHJcbi5uYURpcmVpdGF7XHJcbiAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgIHBhZGRpbmctdG9wOiAxNXB4O1xyXG4gICAgcGFkZGluZy1ib3R0b206IDEwcHg7XHJcbiAgICBhbGlnbi1jb250ZW50OiBjZW50ZXI7XHJcbn1cclxuLm5hRGlyZWl0YTpob3ZlcntcclxuICAgIGNvbG9yOiByZ2IoMjMsIDM1LCAyMDkpO1xyXG4gICAgdHJhbnNpdGlvbjogMC41cztcclxufVxyXG5cclxuLmNvbnRhaW5lcjJ7XHJcbiAgICBwYWRkaW5nLXRvcDogNDBweDtcclxuICAgIG1hcmdpbi1sZWZ0OiAyMHB4O1xyXG4gICAgbWFyZ2luLXJpZ2h0OiAyMHB4O1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMTVweDtcclxuICAgIGZvbnQtc2l6ZTogMTJweDtcclxufVxyXG5cclxuLnJvd3tcclxuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG59XHJcblxyXG4udGFibGV7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn1cclxuXHJcbi50aXR1bG97XHJcbiAgICBmbGV4LXdyYXA6IHdyYXA7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIG1hcmdpbi10b3A6IDhweDtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbn0iXX0= */\"]\n});","map":{"version":3,"mappings":";AAIA,SAASA,cAAT,QAA+B,iCAA/B;AACA,SAASC,aAAT,QAA8B,gCAA9B;;;;;;;;ICQYC;IACIA;IACJA;;;;;;IAWQA,2BAA8D,CAA9D,EAA8D,IAA9D,EAA8D,EAA9D;IACgBA;IAAaA;IAC7BA;IAAIA;IAAqBA;IACzBA;IAAIA;;IAAyCA;IAC7CA;IAAIA;;IAA0CA;;;;;;;IAH9BA;IAAAA;IACZA;IAAAA;IACAA;IAAAA;IACAA;IAAAA;;;;;;IAdZA,kCAA2D,CAA3D,EAA2D,OAA3D,EAA2D,CAA3D,EAA2D,IAA3D,EAA2D,CAA3D,EAA2D,IAA3D,EAA2D,EAA3D;IAGwBA;IAAYA;IAC5BA;IAAgBA;IAAeA;IAC/BA;IAAgBA;IAAWA;IAC3BA;IAAgBA;IAAIA;IAGxBA;IACIA;IAMAA,4BAAI,EAAJ,EAAI,IAAJ,EAAI,EAAJ;IACsBA;IAAUA;IAC5BA;IACAA;IAAIA;;IAA0BA;IAC9BA,uBAAS,EAAT,EAAS,IAAT;IAEJA;IAEJA;IAAsDA;IAAYA;;;;;IAdvCA;IAAAA;IASfA;IAAAA;;;;ADvB5B,OAAM,MAAOC,qBAAP,CAA4B;EAEhCC,YACUC,MADV,EAEUC,IAFV,EAE0B;IADhB;IACA;IAGH,sBAAgC,EAAhC;IACA,sBAAiC,EAAjC;IACA,eAAgC,EAAhC;IACA,mBAAwB,EAAxB;EALF;;EAOLC,QAAQ;IACN,KAAKC,cAAL,GAAsB,IAAIP,aAAJ,CAAkB,KAAKK,IAAvB,CAAtB;IACA,KAAKG,cAAL,GAAsB,IAAIT,cAAJ,CAAmB,KAAKM,IAAxB,CAAtB;IACA,KAAKI,cAAL;EACD;;EAGaA,cAAc;IAAA;;IAAA;MAC1B,KAAI,CAACC,OAAL,SAAqB,KAAI,CAACH,cAAL,CAAoBI,KAApB,EAArB;MACA,KAAI,CAACD,OAAL,EAAcE,OAAd;QAAA,6BAAsB,WAAMC,IAAN,EAAa;UACjC,IAAIC,IAAI,SAAS,KAAI,CAACN,cAAL,CAAoBO,UAApB,CAA+BF,IAAI,CAACG,UAApC,CAAjB;UACAC,OAAO,CAACC,GAAR,CAAYJ,IAAZ;;UACA,IAAG,CAACA,IAAJ,EAAS,CAAE,CAAX,MAAe;YACb,KAAI,CAACK,WAAL,CAAiBC,IAAjB,CAAsBN,IAAI,CAACA,IAA3B;UACD;QACF,CAND;;QAAA;UAAA;QAAA;MAAA;MAQA,KAAI,CAACJ,OAAL,GAAe,KAAI,CAACA,OAAL,EAAcW,OAAd,EAAf;IAV0B;EAY3B;;EACDC,MAAM,CAAEC,CAAF,EAAY;IAChB,OAAOC,MAAM,CAACD,CAAD,CAAb;EACD;;EAEDE,SAAS;IACP,IAAIC,UAAU,GAAG,CAAjB;IACA,KAAKhB,OAAL,EAAciB,KAAd,CAAoB,CAApB,EAAuB,CAAvB,EAA0Bf,OAA1B,CAAkCgB,KAAK,IAAG;MACxCF,UAAU,IAAIF,MAAM,CAACI,KAAK,CAACC,WAAP,CAApB;IACD,CAFD;IAGA,OAAOL,MAAM,CAACE,UAAD,CAAb;EACD;;AA1C+B;;;mBAArBxB,uBAAqBD;AAAA;;;QAArBC;EAAqB4B;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCZlCjC;MACAA,mCAAsE,CAAtE,EAAsE,KAAtE,EAAsE,CAAtE;MAEQA;MACRA;MACAA,mCAAyF,CAAzF,EAAyF,IAAzF,EAAyF,CAAzF;MACuBA;MAAcA;MAEjCA;MAEJA;MACQA,gCAAkB,EAAlB,EAAkB,KAAlB,EAAkB,CAAlB;MAEIA;MAGAA;MA0BAA;;;;MA7BMA;MAAAA;MAGEA;MAAAA","names":["ClienteServico","PedidoServico","i0","ListaPedidosComponent","constructor","router","http","ngOnInit","pedidosServico","clienteServico","listaDePedidos","pedidos","lista","forEach","item","nome","buscaPorId","cliente_id","console","log","nomeCliente","push","reverse","number","a","Number","somaTotal","valorTotal","slice","index","valor_total","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\WM\\Documents\\GitHub\\desafio-angular-codigo-do-futuro\\src\\app\\pages\\lista-pedidos\\lista-pedidos.component.ts","C:\\Users\\WM\\Documents\\GitHub\\desafio-angular-codigo-do-futuro\\src\\app\\pages\\lista-pedidos\\lista-pedidos.component.html"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Pedido } from 'src/app/models/pedido';\r\nimport { ClienteServico } from 'src/app/servicos/clienteServico';\r\nimport { PedidoServico } from 'src/app/servicos/pedidoServico';\r\n\r\n@Component({\r\n  selector: 'app-lista-pedidos',\r\n  templateUrl: './lista-pedidos.component.html',\r\n  styleUrls: ['./lista-pedidos.component.css']\r\n})\r\nexport class ListaPedidosComponent implements OnInit {\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private http: HttpClient,\r\n  ) { }\r\n\r\n  public pedidosServico: PedidoServico = {} as PedidoServico;\r\n  public clienteServico: ClienteServico = {} as ClienteServico;\r\n  public pedidos: Pedido[] | undefined = [];\r\n  public nomeCliente: String[] = [];\r\n\r\n  ngOnInit(): void {\r\n    this.pedidosServico = new PedidoServico(this.http);\r\n    this.clienteServico = new ClienteServico(this.http);\r\n    this.listaDePedidos();\r\n  }\r\n  \r\n\r\n  private async listaDePedidos(){\r\n    this.pedidos = await this.pedidosServico.lista();\r\n    this.pedidos?.forEach(async item =>{\r\n      let nome = await this.clienteServico.buscaPorId(item.cliente_id);\r\n      console.log(nome);\r\n      if(!nome){}else{\r\n        this.nomeCliente.push(nome.nome);\r\n      }\r\n    });\r\n\r\n    this.pedidos = this.pedidos?.reverse();\r\n\r\n  }\r\n  number (a : Number){\r\n    return Number(a)\r\n  }\r\n\r\n  somaTotal(){\r\n    let valorTotal = 0;\r\n    this.pedidos?.slice(0, 5).forEach(index => {\r\n      valorTotal += Number(index.valor_total);\r\n    })\r\n    return Number(valorTotal)\r\n  }\r\n}\r\n","<<<<<<< HEAD\r\n<section class=\"page-section\" id=\"contact\" style=\"margin-top: 100px;\">\r\n    <div class=\"container\">\r\n        <hr>\r\n=======\r\n<section class=\"page-section\" id=\"contact\" style=\"margin-top: 15px; margin-bottom: 2px;\">\r\n    <h2 class=\"titulo\">RESUMO PEDIDOS</h2>\r\n    \r\n    <div class=\"container2\">\r\n        \r\n>>>>>>> estetica\r\n        <div class=\"row \">\r\n            <div class=\"col-lg-8 col-xl-7\">\r\n            <div *ngIf=\"pedidos && pedidos.length == 0\" class=\"alert alert-primary\" role=\"alert\">\r\n                Não existem pedidos cadastrados\r\n            </div>\r\n            <table *ngIf=\"pedidos && pedidos.length > 0\" class=\"table\">\r\n                <thead>\r\n                    <tr>\r\n                    <th scope=\"col\">ID do pedido</th>\r\n                    <th scope=\"col\">Nome do cliente</th>\r\n                    <th scope=\"col\">Valor total</th>\r\n                    <th scope=\"col\">Data</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr *ngFor=\"let pedido of pedidos.slice(0, 5); let i = index\">\r\n                    <th scope=\"row\">{{pedido.id}}</th>\r\n                    <td>{{nomeCliente.at(i)}}</td>\r\n                    <td>{{number(pedido.valor_total) | currency}}</td>\r\n                    <td>{{pedido.data | date: 'dd/MM/yyyy HH:mm'}}</td>\r\n                    </tr>\r\n                    <tr>\r\n                        <th scope = \"row\">Soma total</th>\r\n                        <td></td>\r\n                        <td>{{somaTotal() | currency}}</td>\r\n                        <td></td>\r\n                        <td></td>\r\n                    </tr>\r\n                </tbody>\r\n                <label class=\"naDireita\" routerLink=\"/lista-completa\">Mostrar tudo</label>\r\n            </table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>  "]},"metadata":{},"sourceType":"module"}